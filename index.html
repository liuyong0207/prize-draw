<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¶Šç§€æ˜Ÿæœˆé˜ŸæŠ½å¥–ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 100%;
            max-width: 900px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .prize-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        .prize-btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .prize-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.3);
        }
        .prize-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .prize-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .prize-icon {
            font-size: 1.5rem;
        }
        .prize-text {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .prize-name {
            font-size: 1.2rem;
        }
        .prize-item {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .prize-count {
            background: rgba(0, 0, 0, 0.2);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        .first-prize {
            background: linear-gradient(to right, #ffce54, #ffa647);
            color: #333;
        }
        .second-prize {
            background: linear-gradient(to right, #4ecdc4, #556270);
            color: white;
        }
        .third-prize {
            background: linear-gradient(to right, #ff6b6b, #c44d58);
            color: white;
        }
        .consolation-prize {
            background: linear-gradient(to right, #acb6e5, #86fde8);
            color: #333;
        }
        .result-area {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
        }
        .rolling-text {
            font-size: 2.2rem;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .prize-desc {
            font-size: 1.2rem;
            margin-top: 10px;
            color: #ffce54;
        }
        .winners-list {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
        }
        .winners-list h2 {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        .winner-category {
            margin-bottom: 15px;
        }
        .winner-category h3 {
            margin-bottom: 8px;
            color: #ffce54;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .winner-names {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .winner-tag {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .winner-icon {
            font-size: 1.1rem;
        }
        .rolling {
            animation: rollingAnimation 0.1s infinite;
        }
        @keyframes rollingAnimation {
            0% { opacity: 0.5; transform: translateY(5px); }
            100% { opacity: 1; transform: translateY(-5px); }
        }
        .footer {
            margin-top: 20px;
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }
            .result-area {
                font-size: 1.4rem;
            }
            .rolling-text {
                font-size: 1.8rem;
            }
            .prize-btn {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ† å¹¸è¿æŠ½å¥–ç³»ç»Ÿ ğŸ†</h1>
            <p>ç‚¹å‡»æŒ‰é’®å¼€å§‹æŠ½å¥–ï¼Œå†æ¬¡ç‚¹å‡»åœæ­¢å¹¶æ˜¾ç¤ºç»“æœ</p>
        </header>
        
        <div class="prize-buttons">
            <button class="prize-btn consolation-prize" onclick="startDrawing('consolation')">
                <div class="prize-info">
                    <span class="prize-icon">ğŸ</span>
                    <div class="prize-text">
                        <span class="prize-name">å®‰æ…°å¥–</span>
                        <span class="prize-item">æ°´å£¶</span>
                    </div>
                </div>
                <span class="prize-count">å‰©ä½™: <span id="consolation-count">10</span></span>
            </button>
            
            <button class="prize-btn third-prize" onclick="startDrawing('third')">
                <div class="prize-info">
                    <span class="prize-icon">ğŸ¥‰</span>
                    <div class="prize-text">
                        <span class="prize-name">ä¸‰ç­‰å¥–</span>
                        <span class="prize-item">çœ¼é•œ</span>
                    </div>
                </div>
                <span class="prize-count">å‰©ä½™: <span id="third-count">3</span></span>
            </button>
            
            <button class="prize-btn second-prize" onclick="startDrawing('second')">
                <div class="prize-info">
                    <span class="prize-icon">ğŸ¥ˆ</span>
                    <div class="prize-text">
                        <span class="prize-name">äºŒç­‰å¥–</span>
                        <span class="prize-item">å‰ç¯</span>
                    </div>
                </div>
                <span class="prize-count">å‰©ä½™: <span id="second-count">2</span></span>
            </button>
            
            <button class="prize-btn first-prize" onclick="startDrawing('first')">
                <div class="prize-info">
                    <span class="prize-icon">ğŸ¥‡</span>
                    <div class="prize-text">
                        <span class="prize-name">ä¸€ç­‰å¥–</span>
                        <span class="prize-item">å¤´ç›”</span>
                    </div>
                </div>
                <span class="prize-count">å‰©ä½™: <span id="first-count">1</span></span>
            </button>
        </div>
        
        <div class="result-area">
            <div class="rolling-text" id="resultText">è¯·ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æŠ½å¥–</div>
            <div class="prize-desc" id="prizeDesc"></div>
        </div>
        
        <div class="winners-list">
            <h2>ğŸ¯ ä¸­å¥–åå• ğŸ¯</h2>
            <div class="winner-category">
                <h3><span class="winner-icon">ğŸ¥‡</span> ä¸€ç­‰å¥– (å¤´ç›”) - 1å</h3>
                <div class="winner-names" id="firstPrizeWinners"></div>
            </div>
            <div class="winner-category">
                <h3><span class="winner-icon">ğŸ¥ˆ</span> äºŒç­‰å¥– (å‰ç¯) - 2å</h3>
                <div class="winner-names" id="secondPrizeWinners"></div>
            </div>
            <div class="winner-category">
                <h3><span class="winner-icon">ğŸ¥‰</span> ä¸‰ç­‰å¥– (çœ¼é•œ) - 3å</h3>
                <div class="winner-names" id="thirdPrizeWinners"></div>
            </div>
            <div class="winner-category">
                <h3><span class="winner-icon">ğŸ</span> å®‰æ…°å¥– (æ°´å£¶) - 10å</h3>
                <div class="winner-names" id="consolationPrizeWinners"></div>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <p>æŠ½å¥–ç³»ç»Ÿ &copy; è¶Šç§€æ˜Ÿæœˆé˜Ÿï¼šæ¯äººåªèƒ½ä¸­å¥–ä¸€æ¬¡ï¼Œç¥æ„¿å¤§å®¶éƒ½ä¸­å¤§å¥–ï¼</p>
    </div>

    <script>
        // æ‰€æœ‰å‚ä¸è€…åå•
        const allParticipants = [
            "é’è‹¹æœ", "é™é™å‡é€Ÿå‹‰å¼º20", "æ€å—", "å°k", "å¯è¶…", "å½­äºæ™ï¼ˆå‡é€Ÿ15ï¼‰", 
            "ğŸ‘ æ›¾é™¤å–åŠğŸ‘€", "å¤©å®‡", "åœ¨é‡Â·ğŸŒµ", "å­é±¼ï¼ˆä¼åˆè´¢ç¨ï¼‰", "é™ˆæ°", "LiaoKang", 
            "æµ‘åœ†å¤©æˆ ï¼ˆå±±åœ°ä¹Ÿè¦å†²ï¼", "ç‹å† æ° ä¿ºä¹Ÿä¸€æ ·", "Min", "Ou 1", "æ— æ™", "æµ·è‹”", 
            "ä»²å†¬", "å·¦æ‰‹", "å¾å°ä¹ï¼ˆğŸ™Šï¼‰", "ç‘ç‘", "æ³•ã€‚ã€‚ã€‚ã€‚ã€‚å…‹", "ç¢§ç‰çš„ä¸»äºº", 
            "æ˜å¤©æ˜¯æ™´å¤©", "å¤§ç†Š", "ej", "ä¿®é˜™", "å‰‘å¿ƒ", "ä¸€å£¶è€é…’", "u", "å¼ æµ©", "æ±ªå¤§è¶…", "å¸…å¾èŠ¸"
        ];

        // ç‰¹æ®Šäººå‘˜
        const specialParticipants = {
            noConsolation: ["ä»²å†¬", "ç¢§ç‰çš„ä¸»äºº"], // ä¸å‚ä¸å®‰æ…°å¥–
            noConsolationThird: ["ç¢§ç‰çš„ä¸»äºº"], // ä¸å‚ä¸å®‰æ…°å¥–å’Œä¸‰ç­‰å¥–
            noConsolationThirdFirst: ["ç¢§ç‰çš„ä¸»äºº"], // ä¸å‚ä¸å®‰æ…°å¥–ã€ä¸‰ç­‰å¥–å’Œä¸€ç­‰å¥–
            firstPrizeCandidates: ["å·¦æ‰‹", "å¾å°ä¹ï¼ˆğŸ™Šï¼‰", "ç¢§ç‰çš„ä¸»äºº", "Ou 1", "æ³•ã€‚ã€‚ã€‚ã€‚ã€‚å…‹"] // ä¸€ç­‰å¥–å€™é€‰äºº
        };

        // å¥–é¡¹é…ç½®
        const prizeConfig = {
            first: { count: 1, name: "ä¸€ç­‰å¥–", prize: "å¤´ç›”", emoji: "ğŸ¥‡" },
            second: { count: 2, name: "äºŒç­‰å¥–", prize: "å‰ç¯", emoji: "ğŸ¥ˆ" },
            third: { count: 3, name: "ä¸‰ç­‰å¥–", prize: "çœ¼é•œ", emoji: "ğŸ¥‰" },
            consolation: { count: 10, name: "å®‰æ…°å¥–", prize: "æ°´å£¶", emoji: "ğŸ" }
        };

        // ä¸­å¥–è€…è®°å½•
        const winners = {
            first: [],
            second: [],
            third: [],
            consolation: []
        };

        // æŠ½å¥–çŠ¶æ€
        let isDrawing = false;
        let currentDrawing = null;
        let drawInterval = null;

        // å¼€å§‹æŠ½å¥–
        function startDrawing(prizeType) {
            const button = event.target.closest('.prize-btn');
            
            // å¦‚æœæ­£åœ¨æŠ½å¥–ï¼Œåˆ™åœæ­¢æŠ½å¥–
            if (isDrawing && currentDrawing === prizeType) {
                stopDrawing(prizeType);
                return;
            }
            
            // å¦‚æœå·²ç»åœ¨æŠ½å…¶ä»–å¥–é¡¹ï¼Œå…ˆåœæ­¢
            if (isDrawing) {
                stopDrawing(currentDrawing);
                const prevButton = document.querySelector(`.prize-btn.${currentDrawing}-prize`);
                if (prevButton) {
                    // æ¢å¤æŒ‰é’®æ–‡æœ¬
                    const countSpan = prevButton.querySelector('.prize-count');
                    prevButton.innerHTML = `
                        <div class="prize-info">
                            <span class="prize-icon">${prizeConfig[currentDrawing].emoji}</span>
                            <div class="prize-text">
                                <span class="prize-name">${prizeConfig[currentDrawing].name}</span>
                                <span class="prize-item">${prizeConfig[currentDrawing].prize}</span>
                            </div>
                        </div>
                        ${countSpan.outerHTML}
                    `;
                    prevButton.onclick = function() { startDrawing(currentDrawing); };
                }
            }
            
            // æ£€æŸ¥æ˜¯å¦è¿˜æœ‰æŠ½å¥–æ¬¡æ•°
            if (winners[prizeType].length >= prizeConfig[prizeType].count) {
                alert(`ã€${prizeConfig[prizeType].name}ã€‘æŠ½å¥–æ¬¡æ•°å·²ç”¨å®Œï¼`);
                button.disabled = true;
                return;
            }
            
            // å¼€å§‹æ–°çš„æŠ½å¥–
            isDrawing = true;
            currentDrawing = prizeType;
            
            // æ›´æ–°æŒ‰é’®æ–‡æœ¬
            button.innerHTML = `
                <div class="prize-info">
                    <span class="prize-icon">${prizeConfig[prizeType].emoji}</span>
                    <div class="prize-text">
                        <span class="prize-name">ç‚¹å‡»åœæ­¢</span>
                        <span class="prize-item">${prizeConfig[prizeType].prize}</span>
                    </div>
                </div>
                <span class="prize-count">å‰©ä½™: <span id="${prizeType}-count">${prizeConfig[prizeType].count - winners[prizeType].length}</span></span>
            `;
            button.onclick = function() { startDrawing(prizeType); };
            
            // è·å–ç¬¦åˆæ¡ä»¶çš„å‚ä¸è€…
            let candidates = getCandidates(prizeType);
            
            if (candidates.length === 0) {
                alert("æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å‚ä¸è€…äº†ï¼");
                isDrawing = false;
                return;
            }
            
            // å¼€å§‹æ»šåŠ¨æ•ˆæœ
            const resultText = document.getElementById("resultText");
            const prizeDesc = document.getElementById("prizeDesc");
            resultText.classList.add("rolling");
            prizeDesc.textContent = `æŠ½å–${prizeConfig[prizeType].name}ï¼ˆ${prizeConfig[prizeType].prize}ï¼‰`;
            
            drawInterval = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * candidates.length);
                resultText.textContent = candidates[randomIndex];
            }, 100);
        }

        // åœæ­¢æŠ½å¥–
        function stopDrawing(prizeType) {
            clearInterval(drawInterval);
            isDrawing = false;
            
            const resultText = document.getElementById("resultText");
            const prizeDesc = document.getElementById("prizeDesc");
            resultText.classList.remove("rolling");
            
            // è·å–ç¬¦åˆæ¡ä»¶çš„å‚ä¸è€…
            let candidates = getCandidates(prizeType);
            
            if (candidates.length === 0) {
                resultText.textContent = "æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å‚ä¸è€…";
                prizeDesc.textContent = "";
                return;
            }
            
            // éšæœºé€‰æ‹©ä¸­å¥–è€…
            let winner;
            let attempts = 0;
            do {
                const randomIndex = Math.floor(Math.random() * candidates.length);
                winner = candidates[randomIndex];
                attempts++;
                
                // é˜²æ­¢æ— é™å¾ªç¯
                if (attempts > 100) {
                    winner = "æŠ½å¥–å¤±è´¥ï¼Œè¯·é‡è¯•";
                    break;
                }
            } while (winners[prizeType].includes(winner));
            
            if (winner !== "æŠ½å¥–å¤±è´¥ï¼Œè¯·é‡è¯•") {
                // è®°å½•ä¸­å¥–è€…
                winners[prizeType].push(winner);
                resultText.innerHTML = `<span style="color: #ffce54;">${winner}</span>`;
                prizeDesc.textContent = `æ­å–œè·å¾—${prizeConfig[prizeType].name}ï¼ˆ${prizeConfig[prizeType].prize}ï¼‰ï¼`;
                
                // æ›´æ–°å‰©ä½™æ¬¡æ•°æ˜¾ç¤º
                document.getElementById(`${prizeType}-count`).textContent = prizeConfig[prizeType].count - winners[prizeType].length;
                
                // æ›´æ–°ä¸­å¥–åå•æ˜¾ç¤º
                updateWinnersDisplay();
                
                // æ£€æŸ¥æŠ½å¥–æ¬¡æ•°æ˜¯å¦ç”¨å®Œ
                if (winners[prizeType].length >= prizeConfig[prizeType].count) {
                    const button = document.querySelector(`.prize-btn.${prizeType}-prize`);
                    button.disabled = true;
                    button.querySelector('.prize-text .prize-name').textContent = "å·²æŠ½å®Œ";
                }
            } else {
                resultText.textContent = winner;
                prizeDesc.textContent = "";
            }
        }

        // è·å–ç¬¦åˆæ¡ä»¶çš„å‚ä¸è€…
        function getCandidates(prizeType) {
            // è¿‡æ»¤æ‰å·²ç»ä¸­å¥–çš„äºº
            let candidates = allParticipants.filter(participant => {
                return !Object.values(winners).flat().includes(participant);
            });
            
            // æ ¹æ®å¥–é¡¹ç±»å‹åº”ç”¨ç‰¹æ®Šè§„åˆ™
            if (prizeType === 'consolation') {
                candidates = candidates.filter(participant => 
                    !specialParticipants.noConsolation.includes(participant)
                );
            } else if (prizeType === 'third') {
                candidates = candidates.filter(participant => 
                    !specialParticipants.noConsolationThird.includes(participant)
                );
                
                // ç¡®ä¿ä»²å†¬åœ¨ä¸‰ç­‰å¥–å€™é€‰ä¸­
                if (!winners.third.includes("ä»²å†¬") && candidates.includes("ä»²å†¬")) {
                    return ["ä»²å†¬"]; // ç›´æ¥è¿”å›ä»²å†¬
                }
            } else if (prizeType === 'first') {
                candidates = candidates.filter(participant => 
                    !specialParticipants.noConsolationThirdFirst.includes(participant)
                );
                
                // ä¸€ç­‰å¥–åªèƒ½ä»ç‰¹å®šå€™é€‰äººä¸­æŠ½å–
                candidates = candidates.filter(participant => 
                    specialParticipants.firstPrizeCandidates.includes(participant)
                );
            }
            
            return candidates;
        }

        // æ›´æ–°ä¸­å¥–åå•æ˜¾ç¤º
        function updateWinnersDisplay() {
            for (const prizeType in winners) {
                const container = document.getElementById(`${prizeType}PrizeWinners`);
                container.innerHTML = '';
                
                winners[prizeType].forEach(winner => {
                    const winnerTag = document.createElement('div');
                    winnerTag.className = 'winner-tag';
                    winnerTag.innerHTML = `<span class="winner-icon">${prizeConfig[prizeType].emoji}</span> ${winner}`;
                    container.appendChild(winnerTag);
                });
            }
        }

        // åˆå§‹åŒ–æ˜¾ç¤º
        updateWinnersDisplay();
    </script>
</body>
</html>
